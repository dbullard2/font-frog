{"ast":null,"code":"// The `post` table stores additional PostScript information, such as glyph names.\n// https://www.microsoft.com/typography/OTSPEC/post.htm\nimport { standardNames } from '../encoding';\nimport parse from '../parse';\nimport table from '../table'; // Parse the PostScript `post` table\n\nfunction parsePostTable(data, start) {\n  var post = {};\n  var p = new parse.Parser(data, start);\n  post.version = p.parseVersion();\n  post.italicAngle = p.parseFixed();\n  post.underlinePosition = p.parseShort();\n  post.underlineThickness = p.parseShort();\n  post.isFixedPitch = p.parseULong();\n  post.minMemType42 = p.parseULong();\n  post.maxMemType42 = p.parseULong();\n  post.minMemType1 = p.parseULong();\n  post.maxMemType1 = p.parseULong();\n\n  switch (post.version) {\n    case 1:\n      post.names = standardNames.slice();\n      break;\n\n    case 2:\n      post.numberOfGlyphs = p.parseUShort();\n      post.glyphNameIndex = new Array(post.numberOfGlyphs);\n\n      for (var i = 0; i < post.numberOfGlyphs; i++) {\n        post.glyphNameIndex[i] = p.parseUShort();\n      }\n\n      post.names = [];\n\n      for (var _i = 0; _i < post.numberOfGlyphs; _i++) {\n        if (post.glyphNameIndex[_i] >= standardNames.length) {\n          var nameLength = p.parseChar();\n          post.names.push(p.parseString(nameLength));\n        }\n      }\n\n      break;\n\n    case 2.5:\n      post.numberOfGlyphs = p.parseUShort();\n      post.offset = new Array(post.numberOfGlyphs);\n\n      for (var _i2 = 0; _i2 < post.numberOfGlyphs; _i2++) {\n        post.offset[_i2] = p.parseChar();\n      }\n\n      break;\n  }\n\n  return post;\n}\n\nfunction makePostTable() {\n  return new table.Table('post', [{\n    name: 'version',\n    type: 'FIXED',\n    value: 0x00030000\n  }, {\n    name: 'italicAngle',\n    type: 'FIXED',\n    value: 0\n  }, {\n    name: 'underlinePosition',\n    type: 'FWORD',\n    value: 0\n  }, {\n    name: 'underlineThickness',\n    type: 'FWORD',\n    value: 0\n  }, {\n    name: 'isFixedPitch',\n    type: 'ULONG',\n    value: 0\n  }, {\n    name: 'minMemType42',\n    type: 'ULONG',\n    value: 0\n  }, {\n    name: 'maxMemType42',\n    type: 'ULONG',\n    value: 0\n  }, {\n    name: 'minMemType1',\n    type: 'ULONG',\n    value: 0\n  }, {\n    name: 'maxMemType1',\n    type: 'ULONG',\n    value: 0\n  }]);\n}\n\nexport default {\n  parse: parsePostTable,\n  make: makePostTable\n};","map":null,"metadata":{},"sourceType":"module"}