{"ast":null,"code":"// The `head` table contains global information about the font.\n// https://www.microsoft.com/typography/OTSPEC/head.htm\nimport check from '../check';\nimport parse from '../parse';\nimport table from '../table'; // Parse the header `head` table\n\nfunction parseHeadTable(data, start) {\n  var head = {};\n  var p = new parse.Parser(data, start);\n  head.version = p.parseVersion();\n  head.fontRevision = Math.round(p.parseFixed() * 1000) / 1000;\n  head.checkSumAdjustment = p.parseULong();\n  head.magicNumber = p.parseULong();\n  check.argument(head.magicNumber === 0x5F0F3CF5, 'Font header has wrong magic number.');\n  head.flags = p.parseUShort();\n  head.unitsPerEm = p.parseUShort();\n  head.created = p.parseLongDateTime();\n  head.modified = p.parseLongDateTime();\n  head.xMin = p.parseShort();\n  head.yMin = p.parseShort();\n  head.xMax = p.parseShort();\n  head.yMax = p.parseShort();\n  head.macStyle = p.parseUShort();\n  head.lowestRecPPEM = p.parseUShort();\n  head.fontDirectionHint = p.parseShort();\n  head.indexToLocFormat = p.parseShort();\n  head.glyphDataFormat = p.parseShort();\n  return head;\n}\n\nfunction makeHeadTable(options) {\n  // Apple Mac timestamp epoch is 01/01/1904 not 01/01/1970\n  var timestamp = Math.round(new Date().getTime() / 1000) + 2082844800;\n  var createdTimestamp = timestamp;\n\n  if (options.createdTimestamp) {\n    createdTimestamp = options.createdTimestamp + 2082844800;\n  }\n\n  return new table.Table('head', [{\n    name: 'version',\n    type: 'FIXED',\n    value: 0x00010000\n  }, {\n    name: 'fontRevision',\n    type: 'FIXED',\n    value: 0x00010000\n  }, {\n    name: 'checkSumAdjustment',\n    type: 'ULONG',\n    value: 0\n  }, {\n    name: 'magicNumber',\n    type: 'ULONG',\n    value: 0x5F0F3CF5\n  }, {\n    name: 'flags',\n    type: 'USHORT',\n    value: 0\n  }, {\n    name: 'unitsPerEm',\n    type: 'USHORT',\n    value: 1000\n  }, {\n    name: 'created',\n    type: 'LONGDATETIME',\n    value: createdTimestamp\n  }, {\n    name: 'modified',\n    type: 'LONGDATETIME',\n    value: timestamp\n  }, {\n    name: 'xMin',\n    type: 'SHORT',\n    value: 0\n  }, {\n    name: 'yMin',\n    type: 'SHORT',\n    value: 0\n  }, {\n    name: 'xMax',\n    type: 'SHORT',\n    value: 0\n  }, {\n    name: 'yMax',\n    type: 'SHORT',\n    value: 0\n  }, {\n    name: 'macStyle',\n    type: 'USHORT',\n    value: 0\n  }, {\n    name: 'lowestRecPPEM',\n    type: 'USHORT',\n    value: 0\n  }, {\n    name: 'fontDirectionHint',\n    type: 'SHORT',\n    value: 2\n  }, {\n    name: 'indexToLocFormat',\n    type: 'SHORT',\n    value: 0\n  }, {\n    name: 'glyphDataFormat',\n    type: 'SHORT',\n    value: 0\n  }], options);\n}\n\nexport default {\n  parse: parseHeadTable,\n  make: makeHeadTable\n};","map":null,"metadata":{},"sourceType":"module"}