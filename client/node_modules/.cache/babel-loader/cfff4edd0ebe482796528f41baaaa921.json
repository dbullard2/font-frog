{"ast":null,"code":"/**\n * Apply Arabic required ligatures feature to a range of tokens\n */\nimport { ContextParams } from '../../tokenizer';\nimport applySubstitution from '../applySubstitution';\n/**\n * Update context params\n * @param {any} tokens a list of tokens\n * @param {number} index current item index\n */\n\nfunction getContextParams(tokens, index) {\n  var context = tokens.map(function (token) {\n    return token.activeState.value;\n  });\n  return new ContextParams(context, index || 0);\n}\n/**\n * Apply Arabic required ligatures to a context range\n * @param {ContextRange} range a range of tokens\n */\n\n\nfunction arabicRequiredLigatures(range) {\n  var _this = this;\n\n  var script = 'arab';\n  var tokens = this.tokenizer.getRangeTokens(range);\n  var contextParams = getContextParams(tokens);\n  contextParams.context.forEach(function (glyphIndex, index) {\n    contextParams.setCurrentIndex(index);\n\n    var substitutions = _this.query.lookupFeature({\n      tag: 'rlig',\n      script: script,\n      contextParams: contextParams\n    });\n\n    if (substitutions.length) {\n      substitutions.forEach(function (action) {\n        return applySubstitution(action, tokens, index);\n      });\n      contextParams = getContextParams(tokens);\n    }\n  });\n}\n\nexport default arabicRequiredLigatures;\nexport { arabicRequiredLigatures };","map":null,"metadata":{},"sourceType":"module"}